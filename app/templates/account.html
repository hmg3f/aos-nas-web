{% extends "base.html" %}

{% block page_title %}Account Manager{% endblock %}

{% block content %}

{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<div class="flash-messages">
  {% for category, message in messages %}
  <div class="alert alert-{{ category }}">{{ message }}</div>
  {% endfor %}
</div>
{% endif %}
{% endwith %}
    
<section id="account-manager" class="panel">
  <h1>Account Management</h1>

  <form method="POST" action="{{ url_for('/auth.account_manager') }}">
    {{ form.hidden_tag() }}
    
    <div class="form-group">
      <label for="username">Username</label>
      {{ form.username(class="form-control", value=current_user.username) }}
    </div>

    <div class="form-group">
      <label for="current_password">Current Password</label>
      {{ form.current_password(class="form-control") }}
    </div>

    <div class="form-group">
      <label for="new_password">New Password</label>
      {{ form.new_password(class="form-control") }}
    </div>

    <div class="form-group">
      <label for="confirm_password">Confirm New Password</label>
      {{ form.confirm_password(class="form-control") }}
    </div>

    <div class="form-group">
      <button type="submit">Update Account</button>
    </div>
  </form>
  
  <div class="controls">
    <a href="{{url_for('/store.file_viewer')}}">â—€ Return</a>
    <a href="{{url_for('/auth.logout')}}">Log Out</a>
    <a href="{{url_for('/auth.create_user')}}">Create User</a>
  </div>
</section>
{% endblock %}
